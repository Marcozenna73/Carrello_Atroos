<!DOCTYPE html>
<html lang = "it">
<head>

<style>
img {
    display: block;
    margin-left: auto;
    margin-right: auto;
}
</style>

<title>Carrello</title>
<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<nav class="navbar navbar-expand-sm navbar-dark bg-dark d-flex justify-content-between margin: 50px">
    <div class="container-fluid">
                    <div class="dropdown">
                        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" style="font-size: 20px; margin-top: 3px;">
                <i class="fa fa-user-circle"></i> {{ utenti[0][0] }}
                        </button>
                        <ul class="dropdown-menu">
                          {% for utente in utenti %}
                            <li><a class="dropdown-item" href="#">{{ utente[0] }}</a></li>
                          {% endfor %}
                        </ul>
                      </div>
                      <div>
              <a href="https://atroos.com/">
                <img title = 'Logo di Atroos' src="https://atroos.com/wp-content/uploads/2019/06/logoatroos1-1-1.png" alt="Logo Atroos" width="60" height="50">
              </a>
              </div>
              <div>
              <a class="btn btn-primary" type="button" style="font-size: 20px; margin-top: 3px;" href="{{ url_for('Home') }}">
                <i class="fa fa-home"></i> Home
              </a>
              </div>
              </div>
</nav>

<div class="container-fluid" >
    <h1 style = "font-size:50px; color: blue; text-align: left; font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif">Carrello</h1>
    
    {% if num_art_ord == 0 %}
    <p style="font-size: 30px;">Il carrello è attualmente vuoto</p>
    <br>
    {% endif %}

    {% for articolo_ord in articoli_ord %}
  <div class="card bg-light text-dark">
    <div class="card-body">
        <div class="row">
            <div class="col">
            <img src="{{ articolo_ord[4] }}" alt="Foto pasta" width="50%" height="100%">
            </div>
            <div class="col" style="font-size: 30px; margin: auto;">{{ articolo_ord[0] }}</div>
            <div class="col" style="font-size: 23px; margin: auto;">{{ articolo_ord[1] }} €</div>
            <div class="col" style="margin: auto;">
                <div class="dropdown">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
                      Quantità: {{ articolo_ord[2] }}
                    </button>
                    <ul class="dropdown-menu" style="height: 3cm; overflow: auto;">

                      {% for i in range(1, articolo_ord[3] + 1) %}
                      <li><a class="dropdown-item" href="{{url_for('cambiaQuantita', nomeArt=articolo_ord[0], quantita=i)}}">{{ i }}</a></li>
                      {% endfor %}

                    </ul>
                  </div>
            </div>
            <div class="col" style="margin: auto;">
                <a class="btn btn-primary" type="button" href="{{url_for('rimuoviArticolo', nome_art = articolo_ord[0])}}">Rimuovi articolo</a>
            </div>
        </div>
    </div>
  </div>
  <br>
  {% endfor %}

  <div class="card bg-dark text-white">
    <div class="card-body">
        <div class="row">
            <div class="col" style="font-size: 23px; margin: auto;"></div>
            <div class="col" style="font-size: 30px; margin: auto;">Totale:</div>
            <div class="col" style="font-size: 23px; margin: auto;">{{ totale }} €</div>
            {% if num_art_ord != 0 %}
            <div class="col" style="margin: auto;">
                <button class="btn btn-primary" type="button" onclick=acq_art()>Acquista</button>
            </div>
            <div class="col" style="margin: auto;">
                <button class="btn btn-primary" type="button" onclick=svuota()>Svuota carrello</button>
            </div>
            {% endif %}
        </div>
    </div>
  </div>
  <br>
</div>

<a href = 'http://atroos.com/'>
<img title = 'Logo di Atroos' src = 'https://atroos.com/wp-content/uploads/2019/06/logoatroos1-1-1.png' alt = "Logo dell'azienda" style = 'width: 30%'>
</a>

<script>
  function home()
  {
    location.href='/'
  }

  function svuota()
  {
    if (confirm("Eliminare tutti gli articoli dal carrello?")) 
    {
      location.href='{{ url_for("svuotaCarrello") }}'
    }
  }

  function acq_art()
  {
    if (confirm("Procedere con l'acquisto?")) 
    {
      location.href='{{ url_for("acquista")}}'
    } 
  }
</script>

</body>
</html>